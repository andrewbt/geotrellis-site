{"body": "<div class=\"section\" id=\"connection-tags\">\n<span id=\"id1\"></span><h1>Connection Tags</h1>\n<p>Every connection (handle) has a custom <tt class=\"docutils literal\"><span class=\"pre\">tag:</span> <span class=\"pre\">Any</span></tt> member that it initially receives from the command that triggered\nthe connection, which is either the <tt class=\"docutils literal\"><span class=\"pre\">Bind</span></tt> for server-side or <tt class=\"docutils literal\"><span class=\"pre\">Connect</span></tt> for client-side connections.</p>\n<p>Additionally the connection tag can be changed right before a new handle is registered by overriding the\n<tt class=\"docutils literal\"><span class=\"pre\">connectionTag</span></tt> method (from the <tt class=\"docutils literal\"><span class=\"pre\">ConnectionActors</span></tt> trait), which is especially useful for servers that would like\nto attach individual tags to accepted connections and not use (the same) <tt class=\"docutils literal\"><span class=\"pre\">Bind</span></tt> tag for all of them.</p>\n<p>Currently there are three uses for connection tags:</p>\n<ol class=\"arabic\">\n<li><p class=\"first\">Enable/disable encryption on a per-connection basis by having the tag object implement the <tt class=\"docutils literal\"><span class=\"pre\">SslTlsSupport.Enabling</span></tt>\ntrait:</p>\n<div class=\"highlight-scala\"><div class=\"highlight\"><pre><span class=\"cm\">/**</span>\n<span class=\"cm\"> * Interface that can be implemented by a `tag` object on the connection</span>\n<span class=\"cm\"> * in order to determine whether encryption on the connection is to be</span>\n<span class=\"cm\"> * enabled or not.</span>\n<span class=\"cm\"> */</span>\n<span class=\"k\">trait</span> <span class=\"nc\">Enabling</span> <span class=\"o\">{</span>\n  <span class=\"k\">def</span> <span class=\"n\">encrypt</span><span class=\"o\">(</span><span class=\"n\">ctx</span><span class=\"k\">:</span> <span class=\"kt\">PipelineContext</span><span class=\"o\">)</span><span class=\"k\">:</span> <span class=\"kt\">Boolean</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n<p>If the tag does not implement this trait the default setting applies, which is specified as an argument to the\n<tt class=\"docutils literal\"><span class=\"pre\">SslTlsSupport</span></tt> pipeline stage creator. (For example, the <em>spray-can</em> <a class=\"reference internal\" href=\"../../spray-can/http-client/#httpclient\"><em>HttpClient</em></a> has a default of\n&#8220;not encrypted&#8221; and the <em>spray-can</em> <a class=\"reference internal\" href=\"../../spray-can/http-server/#httpserver\"><em>HttpServer</em></a> a default of &#8220;encrypted&#8221;, when the\n<tt class=\"docutils literal\"><span class=\"pre\">spray.can.server.ssl-encryption</span></tt> config setting is enabled and <tt class=\"docutils literal\"><span class=\"pre\">SslTlsSupport</span></tt> available.)</p>\n</li>\n<li><p class=\"first\">Enable log marking: If the tag object implements the new <tt class=\"docutils literal\"><span class=\"pre\">spray.io.LogMarking</span></tt> trait all log messages produced by\nthe <em>spray-io</em> and <em>spray-can</em> layers for this connection will be prefixed with the respective log marker string.\nThis allows for easy grepping of all log messages related to a specific connection across all layers, even in massive\nlogs. The respective log logic is also accessible for your custom layers on top of <em>spray-io</em> / <em>spray-can</em> via the\n<tt class=\"docutils literal\"><span class=\"pre\">spray.io.TaggableLog</span></tt> facility.</p>\n</li>\n<li><p class=\"first\">Custom uses: Since your code has access to the tag from everywhere, including custom pipeline stages, tags can be\nused as a channel for any kind of custom data needs.</p>\n</li>\n</ol>\n</div>\n", "display_toc": false, "title": "Connection Tags", "sourcename": "", "customsidebar": null, "current_page_name": "documentation/spray-io/connection-tags", "next": {"link": "../testing-pipelines/", "title": "Testing Pipelines"}, "rellinks": [["genindex", "General Index", "I", "index"], ["documentation/spray-io/testing-pipelines", "Testing Pipelines", "N", "next"], ["documentation/spray-io/predefined-stages", "Predefined Stages", "P", "previous"]], "meta": {}, "parents": [{"link": "../../", "title": "Documentation"}, {"link": "../", "title": "spray-io"}], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Connection Tags</a></li>\n</ul>\n", "prev": {"link": "../predefined-stages/", "title": "Predefined Stages"}, "metatags": ""}